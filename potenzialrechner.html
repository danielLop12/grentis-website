<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>bAV-Rechner Arbeitgeber — Grentis GmbH</title>
<link rel="stylesheet" href="shared.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
<style>
/* ── Calculator layout ──────────────── */
.calc-section { padding:140px 60px 30px; }
.calc-top { display:grid; grid-template-columns:340px 1fr; gap:20px; align-items:start; margin-bottom:16px; }
.calc-bottom { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; margin-bottom:10px; }

/* ── Input panel ────────────────────── */
.input-panel { background:var(--s1); border:1px solid var(--bd); border-radius:18px; padding:28px 24px; }
.panel-title { font-size:.95rem; font-weight:800; letter-spacing:-.03em; margin-bottom:3px; }
.panel-sub { font-size:.78rem; color:var(--mu); margin-bottom:20px; line-height:1.5; }

/* Slider groups */
.sg { margin-bottom:16px; }
.sg-top { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.sg-label { font-size:.8rem; font-weight:600; color:var(--mu); }
.sg-val { font-size:.88rem; font-weight:800; color:#fff; background:var(--s2); border:1px solid var(--bd); border-radius:7px; padding:4px 11px; min-width:72px; text-align:center; letter-spacing:-.02em; }
.sg-input { font-size:.88rem; font-weight:800; color:#fff; background:var(--s2); border:1px solid var(--bd); border-radius:7px; padding:4px 8px; width:82px; text-align:center; letter-spacing:-.02em; font-family:inherit; outline:none; transition:border-color .2s; }
.sg-input:focus { border-color:var(--or); box-shadow:0 0 0 3px rgba(253,64,0,.15); }
.sg-input::-webkit-inner-spin-button, .sg-input::-webkit-outer-spin-button { -webkit-appearance:none; margin:0; }
.sg-input { -moz-appearance:textfield; }
input[type=range] { -webkit-appearance:none; width:100%; height:4px; background:var(--s3); border-radius:2px; outline:none; cursor:pointer; }
input[type=range]::-webkit-slider-thumb { -webkit-appearance:none; width:18px; height:18px; border-radius:50%; background:var(--or); border:2px solid rgba(253,64,0,.4); cursor:pointer; box-shadow:0 0 0 4px rgba(253,64,0,.12); transition:box-shadow .2s; }
input[type=range]:hover::-webkit-slider-thumb { box-shadow:0 0 0 7px rgba(253,64,0,.1); }
input[type=range]:disabled { opacity:.45; cursor:default; }
.sg-marks { display:flex; justify-content:space-between; margin-top:5px; }
.sg-mark { font-size:.67rem; color:var(--dm); }
.sg-divider { height:1px; background:var(--bd); margin:20px 0; }

/* KPI cards */
.kpi-card { background:var(--s1); border:1px solid var(--bd); border-radius:12px; padding:16px 18px; transition:border-color .3s, transform .25s cubic-bezier(.34,1.56,.64,1); position:relative; overflow:hidden; }
.kpi-card::before { content:''; position:absolute; top:0; left:0; width:3px; height:100%; border-radius:3px 0 0 3px; }
.kpi-card:hover { border-color:rgba(255,255,255,.1); transform:translateY(-2px); }
.kpi-card.accent-gewinn::before { background:var(--or); }
.kpi-card.accent-gewinn .kpi-val { color:var(--or); }
.kpi-card.accent-benefit::before { background:#4ecdc4; }
.kpi-card.accent-benefit .kpi-val { color:#4ecdc4; }
.kpi-label { font-size:.68rem; font-weight:700; color:var(--mu); text-transform:uppercase; letter-spacing:.08em; margin-bottom:8px; }
.kpi-val { font-size:1.4rem; font-weight:800; letter-spacing:-.04em; color:#fff; }
.kpi-val .kpi-currency { font-size:.85em; font-weight:600; opacity:.5; margin-left:2px; }

/* Wertschöpfung highlight card */
.kpi-total { background:linear-gradient(135deg, rgba(253,64,0,.1) 0%, rgba(78,205,196,.08) 100%); border:1px solid rgba(253,64,0,.25); border-radius:12px; padding:18px 20px; text-align:center; transition:border-color .3s; }
.kpi-total:hover { border-color:rgba(253,64,0,.45); }
.kpi-total .kpi-label { color:rgba(255,255,255,.5); margin-bottom:10px; font-size:.72rem; }
.kpi-total .kpi-val { font-size:1.5rem; background:linear-gradient(135deg, var(--or) 30%, #4ecdc4 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }

/* Calc CTA */
.calc-cta-btn { display:flex; align-items:center; justify-content:center; gap:10px; width:100%; margin-top:16px; padding:16px 28px; background:var(--or); color:#fff; font-size:.95rem; font-weight:700; border-radius:12px; text-decoration:none; transition:transform .2s cubic-bezier(.34,1.56,.64,1), box-shadow .2s; box-shadow:0 4px 24px rgba(253,64,0,.3); letter-spacing:-.01em; }
.calc-cta-btn:hover { transform:translateY(-2px); box-shadow:0 8px 32px rgba(253,64,0,.4); }
.calc-cta-btn:active { transform:translateY(0); }
.calc-cta-btn:focus-visible { outline:2px solid var(--or); outline-offset:3px; }

/* Chart card */
.chart-card { background:var(--s1); border:1px solid var(--bd); border-radius:18px; padding:22px 20px; }
.chart-title { font-size:.9rem; font-weight:700; margin-bottom:4px; letter-spacing:-.01em; }
.chart-subtitle { font-size:.78rem; color:var(--mu); margin-bottom:20px; }
.chart-legend { display:flex; gap:20px; margin-bottom:16px; }
.chart-legend-item { display:flex; align-items:center; gap:6px; font-size:.75rem; color:var(--mu); font-weight:500; }
.chart-legend-dot { width:10px; height:10px; border-radius:3px; }
.chart-wrap { position:relative; height:270px; }

/* Table */
.table-card { background:var(--s1); border:1px solid var(--bd); border-radius:18px; padding:24px; overflow-x:auto; }
.table-title { font-size:.88rem; font-weight:700; margin-bottom:14px; }
.data-table { width:100%; border-collapse:collapse; font-size:.78rem; }
.data-table th { text-align:left; font-weight:700; color:var(--mu); font-size:.7rem; text-transform:uppercase; letter-spacing:.06em; padding:10px 12px; border-bottom:1px solid var(--bd); white-space:nowrap; }
.data-table td { padding:9px 12px; color:var(--mu); border-bottom:1px solid rgba(255,255,255,.04); white-space:nowrap; }
.data-table tr:hover td { background:rgba(255,255,255,.02); }
.data-table .pos { color:var(--or); font-weight:600; }
.data-table .neg { color:#ff6b6b; font-weight:600; }
.data-table .yr-highlight { background:rgba(253,64,0,.06); }
.data-table .yr-highlight td { border-bottom-color:rgba(253,64,0,.15); }

/* Disclaimer */
.disclaimer { font-size:.72rem; color:var(--dm); line-height:1.6; text-align:center; margin-top:16px; }

/* ── Info strip ─────────────────────── */
.info-strip { padding:0 60px 80px; }
.info-strip-inner { display:grid; grid-template-columns:repeat(3,1fr); gap:24px; }
.info-strip-card { background:var(--s1); border:1px solid var(--bd); border-radius:18px; padding:28px 24px; display:flex; gap:16px; align-items:flex-start; }
.info-strip-icon { width:44px; height:44px; border-radius:12px; background:var(--or-dim); border:1px solid var(--or-mid); display:flex; align-items:center; justify-content:center; flex-shrink:0; }
.info-strip-icon svg { width:20px; height:20px; stroke:var(--or); stroke-width:1.8; fill:none; }
.info-strip-title { font-size:.9rem; font-weight:700; margin-bottom:6px; }
.info-strip-text { font-size:.81rem; color:var(--mu); line-height:1.65; }

/* ── Mobile ≤768px ──────────────────── */
@media(max-width:768px){
  .calc-section { padding:100px 18px 20px !important; }
  .calc-top { grid-template-columns:1fr; gap:14px; }
  .input-panel { padding:22px 18px; border-radius:14px; }
  .panel-title { font-size:.88rem; }
  .panel-sub { font-size:.73rem; margin-bottom:14px; }
  .sg-label { font-size:.74rem; }
  .sg-val { font-size:.8rem; padding:3px 9px; min-width:60px; }
  .sg-input { font-size:.8rem; width:68px; padding:3px 6px; }
  .sg-mark { font-size:.62rem; }
  .calc-bottom { grid-template-columns:1fr 1fr; gap:8px; }
  .kpi-card { padding:14px 14px; border-radius:10px; }
  .kpi-label { font-size:.62rem; margin-bottom:5px; }
  .kpi-val { font-size:1.1rem; }
  .kpi-total { padding:14px 16px; border-radius:10px; }
  .kpi-total .kpi-label { font-size:.65rem; }
  .kpi-total .kpi-val { font-size:1.15rem; }
  .chart-card { padding:16px 14px; border-radius:14px; }
  .chart-title { font-size:.82rem; }
  .chart-subtitle { font-size:.72rem; margin-bottom:14px; }
  .chart-legend { gap:12px; margin-bottom:10px; }
  .chart-legend-item { font-size:.68rem; }
  .chart-wrap { height:200px; }
  .table-card { padding:16px 12px; border-radius:14px; }
  .table-title { font-size:.8rem; margin-bottom:10px; }
  .data-table { font-size:.7rem; }
  .data-table th { font-size:.62rem; padding:7px 8px; }
  .data-table td { padding:6px 8px; }
  .disclaimer { font-size:.65rem; margin-top:10px; }
  .info-strip { padding:0 18px 48px; }
  .info-strip-inner { grid-template-columns:1fr; gap:12px; }
  .info-strip-card { padding:20px 18px; border-radius:14px; gap:12px; }
  .info-strip-icon { width:38px; height:38px; border-radius:10px; }
  .info-strip-icon svg { width:17px; height:17px; }
  .info-strip-title { font-size:.82rem; margin-bottom:4px; }
  .info-strip-text { font-size:.74rem; }
  .calc-cta-btn { padding:14px 20px; font-size:.88rem; border-radius:10px; margin-top:12px; }
}
@media(max-width:480px){
  .calc-section { padding:90px 14px 16px !important; }
  .calc-bottom { grid-template-columns:1fr; gap:8px; }
  .kpi-val { font-size:1rem; }
  .kpi-total .kpi-val { font-size:1.05rem; }
  .chart-wrap { height:170px; }
  .input-panel { padding:18px 14px; }
  .info-strip { padding:0 14px 36px; }
  .info-strip-card { padding:16px 14px; }
}
</style>
</head>
<body>

<!-- NAV -->
<nav id="nav">
  <a href="index.html" class="nav-logo"><img src="Brand_assets/Logo.png" alt="Grentis" class="nav-logo-img"></a>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li class="has-drop">
      <a href="#">Leistungen <svg class="chev" viewBox="0 0 14 14" fill="none"><path d="M2 5l5 5 5-5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
      <div class="drop">
        <a href="steuerkanzleien.html"><span class="drop-icon"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="var(--or)" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="1"/><path d="M9 22v-5h6v5M9 6h1M14 6h1M9 10h1M14 10h1M9 14h1M14 14h1"/></svg></span>Für Steuerberatungskanzleien</a>
        <a href="unternehmen.html"><span class="drop-icon"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="var(--or)" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2"/><line x1="2" y1="13" x2="22" y2="13"/></svg></span>Für Unternehmen</a>
        <div class="drop-divider"></div>
        <a href="pduk.html"><span class="drop-icon"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="var(--or)" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L4 6v6c0 5 3.6 9.4 8 10.5C16.4 21.4 20 17 20 12V6l-8-4z"/><polyline points="9 12 11 14 15 10"/></svg></span>Pauschaldotierte Unterstützungskasse</a>
      </div>
    </li>
    <li class="has-drop">
      <a href="#">Über Grentis <svg class="chev" viewBox="0 0 14 14" fill="none"><path d="M2 5l5 5 5-5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
      <div class="drop">
        <a href="team.html"><span class="drop-icon"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="var(--or)" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/><circle cx="17" cy="7" r="3"/><path d="M21 21v-2a3 3 0 0 0-3-3"/></svg></span>Unser Team</a>
        <a href="karriere.html"><span class="drop-icon"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="var(--or)" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg></span>Stellenangebote</a>
      </div>
    </li>
    <li><a href="referenzen.html">Referenzen</a></li>
    <li><a href="kontakt.html">Kontakt</a></li>
      <li class="nav-mobile-cta" style="display:none;"><a href="potenzialrechner.html" style="display:flex;align-items:center;justify-content:center;gap:8px;background:var(--or);color:#fff;padding:14px 20px;border-radius:10px;font-size:.88rem;font-weight:700;margin-top:12px;">Potenzialrechner</a></li>
  </ul>
  <a href="potenzialrechner.html" class="btn-nav" style="background:rgba(253,64,0,.15);border:1px solid rgba(253,64,0,.4);color:var(--or);">
    <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="16" y2="14"/><line x1="8" y1="18" x2="12" y2="18"/></svg>
    Potenzialrechner
  </a>
  <button class="nav-toggle" aria-label="Menü" onclick="document.body.classList.toggle('nav-open')"><span></span><span></span><span></span></button>
</nav>
<div class="nav-overlay" onclick="document.body.classList.remove('nav-open')"></div>

<!-- CALCULATOR -->
<section class="calc-section" id="rechner">
  <div class="wrap">
    <!-- Top row: Input + Chart side by side -->
    <div class="calc-top">
      <div class="input-panel">
        <div class="panel-title">Parameter eingeben</div>


        <!-- Anzahl Mitarbeiter -->
        <div class="sg">
          <div class="sg-top"><span class="sg-label">Anzahl Mitarbeiter</span><input type="text" class="sg-input" id="v-ma" value="100" data-slider="s-ma" data-suffix="" data-min="1" data-max="500" oninput="syncFromInput(this)" onblur="clampInput(this)"></div>
          <input type="range" id="s-ma" min="1" max="500" step="1" value="100" oninput="syncFromSlider('s-ma','v-ma','')">
          <div class="sg-marks"><span class="sg-mark">1</span><span class="sg-mark">250</span><span class="sg-mark">500</span></div>
        </div>

        <!-- Durchschnittsalter -->
        <div class="sg">
          <div class="sg-top"><span class="sg-label">Durchschnittsalter Mitarbeiter</span><input type="text" class="sg-input" id="v-age" value="35" data-slider="s-age" data-suffix=" Jahre" data-min="28" data-max="55" oninput="syncFromInput(this)" onblur="clampInput(this)"></div>
          <input type="range" id="s-age" min="28" max="55" step="1" value="35" oninput="syncFromSlider('s-age','v-age',' Jahre')">
          <div class="sg-marks"><span class="sg-mark">28</span><span class="sg-mark">42</span><span class="sg-mark">55</span></div>
        </div>
      </div>

      <div class="chart-card">
        <div class="chart-title">Berechnungsergebnis</div>
        <div class="chart-legend">
          <div class="chart-legend-item"><div class="chart-legend-dot" style="background:#fd4000;"></div>Liquidität</div>
          <div class="chart-legend-item"><div class="chart-legend-dot" style="background:#4ecdc4;"></div>Benefits</div>
        </div>
        <div class="chart-wrap"><canvas id="bavChart"></canvas></div>
      </div>
    </div>

    <!-- Bottom: KPI Cards full width -->
    <div class="calc-bottom">
      <div class="kpi-card accent-gewinn">
        <div class="kpi-label">Gewinn gesamt</div>
        <div class="kpi-val" id="kpi-gewinn">—</div>
      </div>
      <div class="kpi-card accent-gewinn">
        <div class="kpi-label">Gewinn p.a.</div>
        <div class="kpi-val" id="kpi-gewinn-pa">—</div>
      </div>
      <div class="kpi-card accent-benefit">
        <div class="kpi-label">Benefits gesamt</div>
        <div class="kpi-val" id="kpi-benefit">—</div>
      </div>
      <div class="kpi-card accent-benefit">
        <div class="kpi-label">Benefits p.a.</div>
        <div class="kpi-val" id="kpi-benefit-pa">—</div>
      </div>
    </div>
    <div class="kpi-total">
      <div class="kpi-label">Wertschöpfung gesamt</div>
      <div class="kpi-val" id="kpi-wert">—</div>
    </div>

    <a href="kontakt.html#kalender" class="calc-cta-btn" style="margin-top:32px;">Kostenlose individuelle Hochrechnung anfordern <svg width="16" height="16" viewBox="0 0 15 15" fill="none"><path d="M2.5 7.5h10M8.5 3.5l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></a>

    <p class="disclaimer">* Alle Berechnungen basieren auf vereinfachten Annahmen und dienen der ersten Orientierung. Sie ersetzen keine individuelle steuerliche oder rechtliche Beratung. Grentis GmbH übernimmt keine Gewähr für die Richtigkeit der Hochrechnungen.</p>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="foot-top">
    <div>
      <div class="foot-logo"><img src="Brand_assets/Logo.png" alt="Grentis" class="foot-logo-img"></div>
      <div class="foot-social" style="margin-top:20px;">
        <a href="https://www.linkedin.com/company/grentis-gmbh/" target="_blank" title="LinkedIn" aria-label="LinkedIn"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
        <a href="https://www.instagram.com/grentis_/" target="_blank" title="Instagram" aria-label="Instagram"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg></a>
        <a href="https://www.youtube.com/@Grentis_gmbh/shorts?app=desktop" target="_blank" title="YouTube" aria-label="YouTube"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.495 6.205a3.007 3.007 0 00-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 00.527 6.205a31.247 31.247 0 00-.522 5.805 31.247 31.247 0 00.522 5.783 3.007 3.007 0 002.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 002.088-2.088 31.247 31.247 0 00.5-5.783 31.247 31.247 0 00-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"/></svg></a>
        <a href="https://www.tiktok.com/@grentis_gmbh" target="_blank" title="TikTok" aria-label="TikTok"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-2.88 2.5 2.89 2.89 0 01-2.89-2.89 2.89 2.89 0 012.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 00-.79-.05 6.34 6.34 0 00-6.34 6.34 6.34 6.34 0 006.34 6.34 6.34 6.34 0 006.33-6.34V8.69a8.18 8.18 0 004.78 1.52V6.76a4.85 4.85 0 01-1.01-.07z"/></svg></a>
      </div>
    </div>
    <div>
      <div class="foot-col-h">Leistungen</div>
      <ul class="foot-links">
        <li><a href="steuerkanzleien.html">Für Steuerberatungskanzleien</a></li>
        <li><a href="unternehmen.html">Für Unternehmen</a></li>
        <li><a href="pduk.html">pdUK</a></li>
        <li><a href="potenzialrechner.html">Potenzialrechner</a></li>
      </ul>
    </div>
    <div>
      <div class="foot-col-h">Über Grentis</div>
      <ul class="foot-links">
        <li><a href="team.html">Unser Team</a></li>
        <li><a href="karriere.html">Stellenangebote</a></li>
        <li><a href="referenzen.html">Referenzen</a></li>
        <li><a href="kontakt.html">Kontakt</a></li>
      </ul>
    </div>
    <div>
      <div class="foot-col-h">Kontakt</div>
      <div class="foot-contact-row">
        <div class="foot-contact-icon"><svg viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></div>
        <div class="foot-contact-text"><a href="mailto:info@grentis.de">info@grentis.de</a></div>
      </div>
      <div class="foot-contact-row">
        <div class="foot-contact-icon"><svg viewBox="0 0 24 24"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 014.69 12a19.79 19.79 0 01-3.07-8.63A2 2 0 013.6 1.22h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L7.91 8.85a16 16 0 006.29 6.29l.95-.95a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg></div>
        <div class="foot-contact-text"><a href="tel:+4940537981963">+49 40 537981963</a></div>
      </div>
      <div class="foot-contact-row">
        <div class="foot-contact-icon"><svg viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg></div>
        <div class="foot-contact-text">Schenkendorfstraße 3<br>22085 Hamburg</div>
      </div>
    </div>
  </div>
  <div class="foot-bottom">
    <span class="foot-copy">&copy; 2026 Grentis GmbH. Alle Rechte vorbehalten.</span>
    <div class="foot-legal">
      <a href="impressum.html">Impressum</a>
      <a href="datenschutz.html">Datenschutzerklärung</a>
    </div>
  </div>
</footer>

<script>
/* ── Nav ────────────────────────── */
const nav=document.getElementById('nav');
addEventListener('scroll',()=>nav.classList.toggle('scrolled',scrollY>40));
const ro=new IntersectionObserver(e=>e.forEach(x=>{if(x.isIntersecting){x.target.classList.add('on');ro.unobserve(x.target);}}),{threshold:.1});
document.querySelectorAll('.reveal').forEach(el=>ro.observe(el));

/* ── Chart init ─────────────────── */
const ctx = document.getElementById('bavChart').getContext('2d');
const chart = new Chart(ctx, {
  type:'line',
  data:{
    labels:[],
    datasets:[
      { label:'Liquidität', data:[], borderColor:'#fd4000', backgroundColor:'rgba(253,64,0,.08)', fill:true, tension:.3, borderWidth:2.5, pointRadius:0, pointHoverRadius:5 },
      { label:'Benefits', data:[], borderColor:'#4ecdc4', backgroundColor:'rgba(78,205,196,.06)', fill:true, tension:.3, borderWidth:2, pointRadius:0, pointHoverRadius:5, borderDash:[3,3] }
    ]
  },
  options:{
    responsive:true, maintainAspectRatio:false,
    interaction:{ mode:'index', intersect:false },
    plugins:{
      legend:{ display:false },
      tooltip:{
        backgroundColor:'rgba(8,8,8,.95)', titleColor:'#fff', bodyColor:'rgba(255,255,255,.7)',
        borderColor:'rgba(255,255,255,.1)', borderWidth:1, padding:12, cornerRadius:10,
        callbacks:{
          label:function(c){ return c.dataset.label+': '+fmtEur(c.raw); }
        }
      }
    },
    scales:{
      x:{ grid:{ color:'rgba(255,255,255,.04)' }, ticks:{ color:'rgba(255,255,255,.3)', font:{size:11} } },
      y:{ grid:{ color:'rgba(255,255,255,.04)' }, ticks:{ color:'rgba(255,255,255,.3)', font:{size:11}, callback:v=>fmtShort(v) }, beginAtZero:true }
    }
  }
});

/* ── Helpers ─────────────────────── */
function fmtEur(n){ return Math.round(n).toLocaleString('de-DE')+' €'; }
function fmtShort(n){
  if(Math.abs(n)>=1e6) return (n/1e6).toFixed(1).replace('.',',')+' Mio €';
  if(Math.abs(n)>=1e3) return (n/1e3).toFixed(0).replace('.',',')+' T€';
  return n+' €';
}
function fmtPct(n){ return n.toFixed(1).replace('.',',')+' %'; }

/* ── Core calculation ───────────── */
function berechneLiquiditaetsentwicklung(mitarbeiter, durchschnittsalter) {
  const beitragProMAProMonat = 100;
  const renteneintrittsalter = 67;
  const zins = 0.06;

  const jaehrlicherBeitrag = beitragProMAProMonat * 12 * mitarbeiter;
  const laufzeit = Math.max(renteneintrittsalter - durchschnittsalter, 1);

  // Benefits: MA × (67−Alter) × 100 × 12 — wird am Ende der Laufzeit abgezogen
  const gesamtBenefits = mitarbeiter * laufzeit * beitragProMAProMonat * 12;

  let kapital = 0;
  const graphDaten = [];

  for (let jahr = 1; jahr <= laufzeit; jahr++) {
    kapital += jaehrlicherBeitrag;       // Jahresbeitrag rein
    kapital = kapital * (1 + zins);      // 6% Zinseszins auf gesamtes Kapital

    // Im letzten Jahr: Benefits auf einen Schlag auszahlen
    if (jahr === laufzeit) {
      kapital -= gesamtBenefits;
    }

    graphDaten.push({
      jahr,
      gesamtLiquiditaet: kapital,
      kumulierteBenefits: (jahr === laufzeit) ? gesamtBenefits : 0
    });
  }

  return {
    zusammenfassung: {
      laufzeitJahre: laufzeit,
      jaehrlicherZufluss: jaehrlicherBeitrag,
      endLiquiditaet: kapital,
      gesamtBenefits,
      benefitsPA: gesamtBenefits / laufzeit
    },
    graphDaten
  };
}

/* ── Slider ↔ Input sync ────────── */
function syncFromSlider(sliderId, inputId, suffix){
  const val = document.getElementById(sliderId).value;
  document.getElementById(inputId).value = val;
  upd();
}
function syncFromInput(el){
  const raw = el.value.replace(/[^0-9]/g,'');
  const num = parseInt(raw)||0;
  const slider = document.getElementById(el.dataset.slider);
  slider.value = num;
  upd();
}
function clampInput(el){
  const mn = +el.dataset.min, mx = +el.dataset.max;
  let num = parseInt(el.value.replace(/[^0-9]/g,''))||mn;
  if(num<mn) num=mn; if(num>mx) num=mx;
  el.value = num;
  document.getElementById(el.dataset.slider).value = num;
  upd();
}

/* ── Update everything ──────────── */
function upd(){
  const ma   = +document.getElementById('s-ma').value;
  const age  = +document.getElementById('s-age').value;

  const res = berechneLiquiditaetsentwicklung(ma, age);
  const data = res.graphDaten;
  const summary = res.zusammenfassung;

  // KPIs
  const totalGewinn = summary.endLiquiditaet;
  const avgGewinnPA = summary.laufzeitJahre > 0 ? totalGewinn / summary.laufzeitJahre : 0;
  const totalBenefit = summary.gesamtBenefits;
  const avgBenefitPA = summary.benefitsPA;
  document.getElementById('kpi-gewinn').textContent = fmtEur(totalGewinn);
  document.getElementById('kpi-gewinn-pa').textContent = fmtEur(avgGewinnPA);
  document.getElementById('kpi-benefit').textContent = fmtEur(totalBenefit);
  document.getElementById('kpi-benefit-pa').textContent = fmtEur(avgBenefitPA);
  document.getElementById('kpi-wert').textContent = fmtEur(totalGewinn + totalBenefit);

  // Chart
  chart.data.labels = data.map(d => 'Jahr ' + d.jahr);
  chart.data.datasets[0].data = data.map(d => d.gesamtLiquiditaet);
  chart.data.datasets[1].data = data.map(d => d.kumulierteBenefits);
  chart.update('none');

}

// Initial calculation
upd();

/* mobile nav close */
/* Mobile nav accordion */
document.querySelectorAll('.has-drop > a').forEach(a => {
  a.addEventListener('click', function(e) {
    if (window.innerWidth <= 1024) {
      e.preventDefault();
      const li = this.parentElement;
      document.querySelectorAll('.has-drop.open').forEach(el => { if (el !== li) el.classList.remove('open'); });
      li.classList.toggle('open');
    }
  });
});
document.querySelectorAll('.nav-links a').forEach(a => a.addEventListener('click', function() {
  if (window.innerWidth <= 1024 && this.parentElement.classList.contains('has-drop')) return;
  document.body.classList.remove('nav-open');
  document.querySelectorAll('.has-drop.open').forEach(el => el.classList.remove('open'));
}));
</script>
</body>
</html>
